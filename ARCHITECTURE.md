# ValuAI - Detailed System Flowchart & Engine Components

## ğŸ”„ Complete System Pipeline Flowchart

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    VALUAI COMPLETE EXECUTION FLOW                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                                    START
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. SYSTEM INITIALIZATION                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Load Environment (.env)                                                  â”‚
â”‚  â”‚  â”œâ”€ OPENAI_API_KEY                                                        â”‚
â”‚  â”‚  â”œâ”€ HF_TOKEN                                                              â”‚
â”‚  â”‚  â”œâ”€ GEMINI_API_KEY                                                        â”‚
â”‚  â”‚  â””â”€ PUSHOVER credentials                                                  â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Initialize Chroma Vector DB                                             â”‚
â”‚  â”‚  â””â”€ Connect to: products_vectorstore/                                     â”‚
â”‚  â”‚     â””â”€ Collection: "products"                                             â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Load Memory                                                              â”‚
â”‚  â”‚  â””â”€ Parse: memory.json                                                    â”‚
â”‚  â”‚     â””â”€ Contains: [Opportunity] (past deals)                              â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Reset Memory (Keep last 2 items)                                        â”‚
â”‚  â”‚  â””â”€ Truncate memory.json to avoid unbounded growth                       â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. DEAL SCRAPING & COLLECTION                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Fetch RSS Feeds                                                          â”‚
â”‚  â”‚  â”œâ”€ Source 1: DealNews Electronics (10 items)                            â”‚
â”‚  â”‚  â”œâ”€ Source 2: DealNews Computers (10 items)                              â”‚
â”‚  â”‚  â””â”€ Source 3: DealNews Smart Home (10 items)                             â”‚
â”‚  â”‚     â””â”€ Total: ~30 deals per cycle                                         â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ HTML Parsing (BeautifulSoup)                                            â”‚
â”‚  â”‚  For each deal entry:                                                     â”‚
â”‚  â”‚  â”œâ”€ Extract title                                                         â”‚
â”‚  â”‚  â”œâ”€ Extract summary (clean HTML)                                         â”‚
â”‚  â”‚  â”œâ”€ Fetch full URL â†’ GET request                                         â”‚
â”‚  â”‚  â”œâ”€ Parse content-section div                                            â”‚
â”‚  â”‚  â”œâ”€ Split Details | Features                                             â”‚
â”‚  â”‚  â””â”€ Truncate to 100/500/500 chars                                        â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â””â”€ Generate ScrapedDeal Objects                                            â”‚
â”‚     â””â”€ Fields: title, summary, url, details, features                       â”‚
â”‚                                                                               â”‚
â”‚  Result: List[ScrapedDeal] (~30 items)                                      â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. DEAL DEDUPLICATION                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  For each deal in ScrapedDeal list:                                         â”‚
â”‚  â”œâ”€ Extract URL from scraped deal                                           â”‚
â”‚  â”œâ”€ Check if URL exists in memory.json                                      â”‚
â”‚  â””â”€ Keep only NEW deals (not previously processed)                          â”‚
â”‚                                                                               â”‚
â”‚  Result: List[ScrapedDeal] (filtered, ~10-15 new items)                     â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. SCANNER AGENT (Deal Validation & Selection)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  OpenAI Model: gpt-5-mini (Structured Outputs)                              â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Build User Prompt                                                        â”‚
â”‚  â”‚  â”œâ”€ Add system instruction about deal quality requirements               â”‚
â”‚  â”‚  â”œâ”€ List all scraped deals with descriptions                             â”‚
â”‚  â”‚  â””â”€ Request exactly 5 best deals                                         â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Send to OpenAI                                                           â”‚
â”‚  â”‚  â”œâ”€ System: "Identify & summarize 5 most detailed deals"                â”‚
â”‚  â”‚  â”œâ”€ User: Deal list + quality requirements                               â”‚
â”‚  â”‚  â””â”€ Response Format: DealSelection (structured output)                   â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Parse Response                                                           â”‚
â”‚  â”‚  For each selected deal:                                                  â”‚
â”‚  â”‚  â”œâ”€ product_description: clean summary                                   â”‚
â”‚  â”‚  â”œâ”€ price: validated float (must be > 0)                                 â”‚
â”‚  â”‚  â”œâ”€ url: confirmed URL                                                   â”‚
â”‚  â”‚  â””â”€ Filter out price â‰¤ 0                                                 â”‚
â”‚  â”‚                                                                            â”‚
â”‚  Result: List[Deal] (exactly 5 validated deals)                             â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. PREPROCESSING (TEXT NORMALIZATION)                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  For each deal description:                                                 â”‚
â”‚  â”œâ”€ Pass to Preprocessor                                                    â”‚
â”‚  â”œâ”€ DISABLED on Windows (Ollama instability)                               â”‚
â”‚  â””â”€ Returns: original description (pass-through)                           â”‚
â”‚                                                                               â”‚
â”‚  (Optional enhancement: Could use TinyLLaMA for text rewriting)             â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚                 â”‚
                    â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6A. PRICING MODEL 1: FRONTIER AGENT (GPT + RAG)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Text Encoding (SentenceTransformer)                                     â”‚
â”‚  â”‚  â”œâ”€ Model: sentence-transformers/all-MiniLM-L6-v2                       â”‚
â”‚  â”‚  â”œâ”€ Input: product description                                          â”‚
â”‚  â”‚  â””â”€ Output: 384-dimensional vector                                      â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Vector Database Search (Chroma RAG)                                    â”‚
â”‚  â”‚  â”œâ”€ Query embedding against Chroma collection                           â”‚
â”‚  â”‚  â”œâ”€ Retrieve: top 5 similar products                                    â”‚
â”‚  â”‚  â”œâ”€ Extract prices from metadata                                        â”‚
â”‚  â”‚  â””â”€ Similar products: [descâ‚, descâ‚‚, descâ‚ƒ, descâ‚„, descâ‚…]             â”‚
â”‚  â”‚                       [priceâ‚, priceâ‚‚, priceâ‚ƒ, priceâ‚„, priceâ‚…]        â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Build LLM Prompt with Context                                          â”‚
â”‚  â”‚  â”œâ”€ "Estimate the price of this product"                                â”‚
â”‚  â”‚  â”œâ”€ Product description                                                 â”‚
â”‚  â”‚  â”œâ”€ "Here are similar products for context:"                            â”‚
â”‚  â”‚  â”œâ”€ Similar product descriptions + historical prices                    â”‚
â”‚  â”‚  â””â”€ "Respond with only the price, no explanation"                       â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ OpenAI API Call                                                         â”‚
â”‚  â”‚  â”œâ”€ Model: gpt-5.1                                                       â”‚
â”‚  â”‚  â”œâ”€ Seed: 42 (deterministic)                                            â”‚
â”‚  â”‚  â”œâ”€ Reasoning effort: none                                              â”‚
â”‚  â”‚  â””â”€ Response: "$XXX.XX" or similar                                      â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Extract Price                                                           â”‚
â”‚  â”‚  â”œâ”€ Remove "$" and ","                                                  â”‚
â”‚  â”‚  â”œâ”€ Regex search for float number                                       â”‚
â”‚  â”‚  â””â”€ Return: float value                                                 â”‚
â”‚  â”‚                                                                            â”‚
â”‚  Output: frontier_price (float)                                             â”‚
â”‚  Weight in ensemble: 80%                                                    â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                  â”‚
                    â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6B. PRICING MODEL 2: SPECIALIST AGENT (Fine-tuned Modal)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Connect to Modal Service                                                â”‚
â”‚  â”‚  â”œâ”€ Service name: "pricer-service"                                      â”‚
â”‚  â”‚  â”œâ”€ Class name: "Pricer"                                                â”‚
â”‚  â”‚  â””â”€ Method: price.remote()                                              â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Remote Function Invocation                                             â”‚
â”‚  â”‚  â”œâ”€ Input: product description                                          â”‚
â”‚  â”‚  â”œâ”€ Modal executes fine-tuned model                                     â”‚
â”‚  â”‚  â”œâ”€ Model: Custom LLM fine-tuned on pricing data                       â”‚
â”‚  â”‚  â””â”€ Returns: price estimate                                             â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Error Handling                                                          â”‚
â”‚  â”‚  â””â”€ If Modal unavailable â†’ uses fallback or skips                       â”‚
â”‚  â”‚                                                                            â”‚
â”‚  Output: specialist_price (float)                                           â”‚
â”‚  Weight in ensemble: 10%                                                    â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                  â”‚
                    â–¼                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6C. PRICING MODEL 3: NEURAL NETWORK AGENT                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Setup (initialization)                                                  â”‚
â”‚  â”‚  â”œâ”€ Initialize HashingVectorizer                                        â”‚
â”‚  â”‚  â”‚  â”œâ”€ n_features: 5000                                                â”‚
â”‚  â”‚  â”‚  â”œâ”€ binary: True                                                    â”‚
â”‚  â”‚  â”‚  â””â”€ stop_words: English                                            â”‚
â”‚  â”‚  â”‚                                                                       â”‚
â”‚  â”‚  â”œâ”€ Initialize Deep Neural Network model                               â”‚
â”‚  â”‚  â”‚  â”œâ”€ Input size: 5000                                               â”‚
â”‚  â”‚  â”‚  â”œâ”€ Hidden size: 4096                                              â”‚
â”‚  â”‚  â”‚  â”œâ”€ Num layers: 10                                                 â”‚
â”‚  â”‚  â”‚  â”œâ”€ Dropout: 0.2                                                   â”‚
â”‚  â”‚  â”‚  â””â”€ Architecture: Input â†’ 8 Residual Blocks â†’ Output              â”‚
â”‚  â”‚  â”‚                                                                       â”‚
â”‚  â”‚  â””â”€ Load Pre-trained Weights                                            â”‚
â”‚  â”‚     â””â”€ File: deep_neural_network.pth                                   â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Feature Extraction                                                      â”‚
â”‚  â”‚  â”œâ”€ Input: product description (text)                                  â”‚
â”‚  â”‚  â”œâ”€ HashingVectorizer.transform()                                      â”‚
â”‚  â”‚  â”œâ”€ Output: sparse matrix (5000 dimensions, binary)                    â”‚
â”‚  â”‚  â””â”€ Convert to dense: numpy array                                      â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Model Inference                                                         â”‚
â”‚  â”‚  â”œâ”€ Convert to PyTorch tensor                                          â”‚
â”‚  â”‚  â”œâ”€ Move to device (GPU/MPS/CPU)                                       â”‚
â”‚  â”‚  â”œâ”€ Forward pass:                                                      â”‚
â”‚  â”‚  â”‚  â”œâ”€ Layer 1: Linear(5000â†’4096) â†’ LayerNorm â†’ ReLU â†’ Dropout       â”‚
â”‚  â”‚  â”‚  â”œâ”€ ResidualBlocks Ã— 8:                                           â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€ Linear â†’ LayerNorm â†’ ReLU â†’ Dropout â†’ Linear +skip        â”‚
â”‚  â”‚  â”‚  â””â”€ Output Layer: Linear(4096â†’1)                                  â”‚
â”‚  â”‚  â””â”€ Extract scalar output                                              â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Denormalization                                                        â”‚
â”‚  â”‚  â”œâ”€ Raw output: z                                                      â”‚
â”‚  â”‚  â”œâ”€ Y_MEAN = 4.435                                                     â”‚
â”‚  â”‚  â”œâ”€ Y_STD = 1.033                                                      â”‚
â”‚  â”‚  â”œâ”€ Formula: exp(z Ã— Y_STD + Y_MEAN) - 1                              â”‚
â”‚  â”‚  â””â”€ Ensure non-negative: max(0, result)                               â”‚
â”‚  â”‚                                                                            â”‚
â”‚  Output: nn_price (float)                                                  â”‚
â”‚  Weight in ensemble: 10%                                                   â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. ENSEMBLE COMBINATION                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  Inputs:                                                                     â”‚
â”‚  â”œâ”€ frontier_price (from Model 1)                                          â”‚
â”‚  â”œâ”€ specialist_price (from Model 2)                                        â”‚
â”‚  â””â”€ nn_price (from Model 3)                                                â”‚
â”‚                                                                               â”‚
â”‚  Weighted Combination:                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ final_estimate = (frontier_price Ã— 0.80) +                             â”‚
â”‚  â”‚                  (specialist_price Ã— 0.10) +                           â”‚
â”‚  â”‚                  (nn_price Ã— 0.10)                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                               â”‚
â”‚  Example:                                                                    â”‚
â”‚  â”œâ”€ frontier_price = $250.00 Ã— 0.80 = $200.00                             â”‚
â”‚  â”œâ”€ specialist_price = $240.00 Ã— 0.10 = $24.00                            â”‚
â”‚  â”œâ”€ nn_price = $235.00 Ã— 0.10 = $23.50                                    â”‚
â”‚  â””â”€ final_estimate = $247.50                                               â”‚
â”‚                                                                               â”‚
â”‚  Output: ensemble_estimate (float, represents true market value)           â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. OPPORTUNITY IDENTIFICATION                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  Calculate Discount:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ discount = ensemble_estimate - deal_price                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                               â”‚
â”‚  Example:                                                                    â”‚
â”‚  â”œâ”€ ensemble_estimate = $247.50                                            â”‚
â”‚  â”œâ”€ deal_price = $178.00                                                   â”‚
â”‚  â””â”€ discount = $69.50                                                      â”‚
â”‚                                                                               â”‚
â”‚  Threshold Check:                                                           â”‚
â”‚  â”œâ”€ DEAL_THRESHOLD = $50.00                                               â”‚
â”‚  â”œâ”€ Is discount > $50?                                                     â”‚
â”‚  â””â”€ YES â†’ Create Opportunity | NO â†’ Discard                               â”‚
â”‚                                                                               â”‚
â”‚  Create Opportunity Object:                                                â”‚
â”‚  â”œâ”€ deal: Deal object (description, price, url)                           â”‚
â”‚  â”œâ”€ estimate: ensemble_estimate                                            â”‚
â”‚  â””â”€ discount: calculated discount                                          â”‚
â”‚                                                                               â”‚
â”‚  Output: Opportunity or None                                               â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                     â”‚
                    â–¼                                     â–¼
            [Discount > $50]                      [Discount â‰¤ $50]
                    â”‚                                     â”‚
                    â–¼                                     â–¼
        [CREATE OPPORTUNITY]                     [DISCARD DEAL]
                    â”‚                                     â”‚
                    â–¼                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9A. MESSAGING AGENT (Notification)                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Craft Exciting Message                                                 â”‚
â”‚  â”‚  â”œâ”€ Model: Gemini 2.5 Flash                                            â”‚
â”‚  â”‚  â”œâ”€ Prompt: "Summarize deal in 2-3 sentences"                         â”‚
â”‚  â”‚  â”‚  â”œâ”€ Item description                                                â”‚
â”‚  â”‚  â”‚  â”œâ”€ Offered price                                                   â”‚
â”‚  â”‚  â”‚  â”œâ”€ Estimated true value                                            â”‚
â”‚  â”‚  â”‚  â””â”€ Make it exciting!                                              â”‚
â”‚  â”‚  â””â”€ Response: 2-3 sentence marketing copy                              â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Send Push Notification (Pushover API)                                 â”‚
â”‚  â”‚  â”œâ”€ Endpoint: https://api.pushover.net/1/messages.json                â”‚
â”‚  â”‚  â”œâ”€ Payload:                                                           â”‚
â”‚  â”‚  â”‚  â”œâ”€ user: PUSHOVER_USER                                            â”‚
â”‚  â”‚  â”‚  â”œâ”€ token: PUSHOVER_TOKEN                                          â”‚
â”‚  â”‚  â”‚  â”œâ”€ message: crafted message + URL                                â”‚
â”‚  â”‚  â”‚  â””â”€ sound: cashregister                                            â”‚
â”‚  â”‚  â””â”€ Sends to user's phone                                             â”‚
â”‚  â”‚                                                                            â”‚
â”‚  Output: User receives push notification with deal details                 â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 9B. PERSISTENCE (Memory Update)                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€ Append Opportunity to Memory                                           â”‚
â”‚  â”‚  â”œâ”€ Load memory.json                                                    â”‚
â”‚  â”‚  â”œâ”€ Add new Opportunity object                                         â”‚
â”‚  â”‚  â””â”€ Write back to memory.json                                          â”‚
â”‚  â”‚                                                                            â”‚
â”‚  â”Œâ”€ Update Memory.json Structure                                          â”‚
â”‚  â”‚  â””â”€ [Opportunityâ‚, Opportunityâ‚‚, ..., Opportunity_N]                  â”‚
â”‚  â”‚                                                                            â”‚
â”‚  Purpose: Prevents duplicate notifications for same URL                    â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 10. RETURN RESULTS                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  Output: List[Opportunity]                                                  â”‚
â”‚  â”œâ”€ Contains: all opportunities from this cycle                            â”‚
â”‚  â”œâ”€ Includes: past deals (from memory)                                    â”‚
â”‚  â””â”€ API Response: JSON serialized opportunities                           â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
                                      END
```

---

## ğŸ“Š Engine Component Architecture

### Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ENGINE COMPONENT INTERACTIONS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ External Systems    â”‚
                        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                        â”‚ â€¢ DealNews (RSS)    â”‚
                        â”‚ â€¢ OpenAI (GPT)      â”‚
                        â”‚ â€¢ Modal (Fine-tune) â”‚
                        â”‚ â€¢ Pushover (Alert)  â”‚
                        â”‚ â€¢ Gemini (LLM)      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚            â”‚            â”‚
                    â–¼            â–¼            â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Chroma DB â”‚ â”‚ Memory   â”‚ â”‚ .env Creds â”‚
            â”‚ (Products) â”‚ â”‚(Deals)   â”‚ â”‚            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚            â”‚            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ DealAgentFramework      â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ â€¢ init_agents_as_needed â”‚
                    â”‚ â€¢ read_memory()         â”‚
                    â”‚ â€¢ write_memory()        â”‚
                    â”‚ â€¢ run() [MAIN LOOP]     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ PlanningAgent           â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚ â€¢ Orchestrator          â”‚
                    â”‚ â€¢ Threshold filtering   â”‚
                    â”‚ â€¢ Results sorting       â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                        â”‚           â”‚    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
          â”‚             â”‚       â”‚  â”‚    â”‚
          â–¼             â–¼       â–¼  â–¼    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Scanner  â”‚  â”‚ Ensem- â”‚ â”‚ Messag-â”‚ â”‚ Prepro- â”‚
    â”‚  Agent   â”‚  â”‚ ble    â”‚ â”‚  ing   â”‚ â”‚ cessor  â”‚
    â”‚          â”‚  â”‚ Agent  â”‚ â”‚ Agent  â”‚ â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”¬â”€â”€â”¬â”€â”€â”¬â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚          â”‚  â”‚  â”‚       â”‚
         â”‚          â”‚  â”‚  â”‚       â”œâ”€â†’ [Pushover API]
         â”‚          â”‚  â”‚  â”‚       â”‚
         â”‚      â”Œâ”€â”€â”€â”˜  â”‚  â””â”€â”€â”    â”‚
         â”‚      â”‚         â”‚  â”‚    â”‚
         â”‚      â–¼         â–¼  â–¼    â”‚
         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   â”‚  ENSEMBLE MODELS (3-way)     â”‚
         â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚   â”‚                              â”‚
         â”‚   â”‚ 1. Frontier Agent (80%)      â”‚
         â”‚   â”‚    â”œâ”€ SentenceTransformer   â”‚
         â”‚   â”‚    â”œâ”€ Chroma RAG Search     â”‚
         â”‚   â”‚    â””â”€ OpenAI GPT-5.1 Call   â”‚
         â”‚   â”‚                              â”‚
         â”‚   â”‚ 2. Specialist Agent (10%)   â”‚
         â”‚   â”‚    â””â”€ Modal Remote Call     â”‚
         â”‚   â”‚                              â”‚
         â”‚   â”‚ 3. Neural Network (10%)     â”‚
         â”‚   â”‚    â”œâ”€ HashingVectorizer     â”‚
         â”‚   â”‚    â”œâ”€ 10-layer ResNet       â”‚
         â”‚   â”‚    â””â”€ Denormalization       â”‚
         â”‚   â”‚                              â”‚
         â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚
         â”‚                â–¼
         â”‚          [Price Estimate]
         â”‚                â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                         â”‚
                         â–¼                         â–¼
                  [Discount Calc]          [Memory Update]
                         â”‚                         â”‚
                         â–¼                         â–¼
                  [Threshold Check]         [memory.json]
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚          â”‚
              [ALERT]      [DISCARD]
```

---

## ğŸ”„ Detailed Model Inference Pipeline

### Model 1: Frontier Agent (RAG-Enhanced LLM)

```
Input: "55-inch 4K Smart TV with Dolby Vision HDR..."
  â”‚
  â–¼
[SentenceTransformer]
  â”œâ”€ Model: all-MiniLM-L6-v2
  â”œâ”€ Converts text to 384-dim vector
  â””â”€ Output: embedding_vector

  â”‚
  â–¼
[Chroma Vector Search]
  â”œâ”€ Query: embedding_vector
  â”œâ”€ Search index: products_vectorstore
  â”œâ”€ n_results: 5
  â””â”€ Output: List[(doc, price)] for 5 similar products

  â”‚
  â–¼
[Build Context]
  â”œâ”€ Similar Product 1: 32" 4K TV - $180
  â”œâ”€ Similar Product 2: 50" 4K TV - $220
  â”œâ”€ Similar Product 3: 55" Smart TV - $250
  â”œâ”€ Similar Product 4: 65" 4K TV - $350
  â””â”€ Similar Product 5: 42" Premium TV - $200

  â”‚
  â–¼
[OpenAI API Call]
  â”œâ”€ Model: gpt-5.1
  â”œâ”€ System: "Estimate product prices accurately"
  â”œâ”€ User: Product desc + 5 similar + prices
  â”œâ”€ Seed: 42 (deterministic)
  â””â”€ Response: "$250" or similar

  â”‚
  â–¼
[Extract Price]
  â”œâ”€ Clean: remove $, commas
  â”œâ”€ Regex: find first float
  â””â”€ Output: 250.0 (float)

Result: frontier_price = $250.00
```

### Model 2: Specialist Agent (Fine-tuned Remote Model)

```
Input: "55-inch 4K Smart TV with Dolby Vision HDR..."
  â”‚
  â–¼
[Modal Connection]
  â”œâ”€ Service: pricer-service
  â”œâ”€ Function: Pricer.price
  â””â”€ Type: Remote async function

  â”‚
  â–¼
[Remote Execution]
  â”œâ”€ Model: Fine-tuned LLM (hosted on Modal)
  â”œâ”€ Training: Product pricing data
  â”œâ”€ Execution: Serverless GPU container
  â””â”€ Response: price estimate

  â”‚
  â–¼
[Extract Result]
  â””â”€ Output: 240.0 (float)

Result: specialist_price = $240.00
```

### Model 3: Neural Network Agent (ResidualNet)

```
Input: "55-inch 4K Smart TV with Dolby Vision HDR..."
  â”‚
  â–¼
[HashingVectorizer]
  â”œâ”€ n_features: 5000
  â”œâ”€ Stop words: English
  â”œâ”€ Binary: True (term presence, not frequency)
  â””â”€ Output: sparse vector (5000 dims, binary)

  â”‚
  â–¼
[Convert to Dense Tensor]
  â”œâ”€ Convert sparse â†’ dense (numpy)
  â”œâ”€ Convert numpy â†’ PyTorch tensor
  â””â”€ Move to device (GPU/MPS/CPU)

  â”‚
  â–¼
[Model Architecture - Forward Pass]

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Input Layer                          â”‚
  â”‚ Linear(5000 â†’ 4096)                 â”‚
  â”‚   + LayerNorm(4096)                 â”‚
  â”‚   + ReLU()                          â”‚
  â”‚   + Dropout(0.2)                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚
    â”‚ Residual Blocks Ã— 8 â”‚
    â”‚ (Each block):       â”‚
    â”‚  Linear(4096 â†’ ...) â”‚
    â”‚  LayerNorm          â”‚
    â”‚  ReLU               â”‚
    â”‚  Dropout(0.2)       â”‚
    â”‚  Linear(... â†’ 4096) â”‚
    â”‚  LayerNorm          â”‚
    â”‚  + skip connection  â”‚
    â”‚  ReLU               â”‚
    â”‚                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Output Layer            â”‚
  â”‚ Linear(4096 â†’ 1)        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Raw Output (z)          â”‚
  â”‚ Example: z = 4.85       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Denormalization         â”‚
  â”‚ Formula:                â”‚
  â”‚ exp(z Ã— Ïƒ + Î¼) - 1     â”‚
  â”‚ where:                  â”‚
  â”‚   Ïƒ = 1.033             â”‚
  â”‚   Î¼ = 4.435             â”‚
  â”‚                         â”‚
  â”‚ exp(4.85 Ã— 1.033 +     â”‚
  â”‚     4.435) - 1         â”‚
  â”‚ = exp(9.43) - 1        â”‚
  â”‚ â‰ˆ 235.00               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Ensure Non-Negative     â”‚
  â”‚ max(0, result)          â”‚
  â”‚ Output: 235.00 (float)  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Result: nn_price = $235.00
```

---

## ğŸ¯ Complete Inference Example

```
SCENARIO: Processing 55-inch 4K TV priced at $178

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INPUT                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Deal Description: "55-inch 4K Smart TV with Dolby Vision    â”‚
â”‚                   HDR, 3840x2160 resolution, Roku OS,       â”‚
â”‚                   voice control compatible, 3 HDMI ports"   â”‚
â”‚ Advertised Price: $178.00                                   â”‚
â”‚ URL: https://www.dealnews.com/...                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â¤µï¸â¤µï¸â¤µï¸ ENSEMBLE PROCESSING â¤µï¸â¤µï¸â¤µï¸

â”Œâ”€ Frontier Agent (80% weight) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Encode description â†’ 384-dim vector                      â”‚
â”‚ 2. Search Chroma DB â†’ find similar 55" TVs                 â”‚
â”‚    â€¢ 50" 4K TV (Meta: $220)                                â”‚
â”‚    â€¢ 65" 4K TV (Meta: $320)                                â”‚
â”‚    â€¢ 55" Smart TV (Meta: $240)                             â”‚
â”‚    â€¢ 55" UHD TV (Meta: $260)                               â”‚
â”‚    â€¢ 42" 4K TV (Meta: $180)                                â”‚
â”‚ 3. Context: "Similar 55" TVs average $240-$260"           â”‚
â”‚ 4. Call GPT-5.1 â†’ "Based on context, estimate: $250"      â”‚
â”‚ 5. Extract: frontier_price = $250.00                        â”‚
â”‚                                                              â”‚
â”‚ Result: $250.00                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Specialist Agent (10% weight) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Connect to Modal service                                 â”‚
â”‚ 2. Call remote fine-tuned model                            â”‚
â”‚ 3. Model trained on TV pricing patterns                    â”‚
â”‚ 4. Response: $240.00                                       â”‚
â”‚                                                              â”‚
â”‚ Result: $240.00                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ Neural Network (10% weight) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Hash vectorize: "55-inch 4K Smart TV..." â†’ 5000 featuresâ”‚
â”‚ 2. Forward pass through 10-layer ResNet                    â”‚
â”‚ 3. Raw output: z â‰ˆ 4.85                                    â”‚
â”‚ 4. Denormalize: exp(4.85 Ã— 1.033 + 4.435) - 1 = $235.00  â”‚
â”‚ 5. Ensure positive: max(0, 235.00) = $235.00              â”‚
â”‚                                                              â”‚
â”‚ Result: $235.00                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â¤´ï¸â¤´ï¸â¤´ï¸ ENSEMBLE COMBINATION â¤´ï¸â¤´ï¸â¤´ï¸

Weighted Average:
  final_estimate = (250.00 Ã— 0.80) +
                  (240.00 Ã— 0.10) +
                  (235.00 Ã— 0.10)
  
  = 200.00 + 24.00 + 23.50
  = $247.50

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ENSEMBLE RESULT                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Estimated True Value: $247.50                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â¤µï¸ OPPORTUNITY IDENTIFICATION â¤µï¸

Discount Calculation:
  discount = estimate - price
  discount = $247.50 - $178.00
  discount = $69.50

Threshold Check:
  Is $69.50 > $50 (DEAL_THRESHOLD)?
  YES âœ“

Result: OPPORTUNITY CREATED!

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OUTPUT: Opportunity                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Deal                                                         â”‚
â”‚  â”œâ”€ product_description: "55-inch 4K Smart TV..."          â”‚
â”‚  â”œâ”€ price: 178.00                                          â”‚
â”‚  â””â”€ url: "https://www.dealnews.com/..."                    â”‚
â”‚ Estimate: 247.50                                            â”‚
â”‚ Discount: 69.50                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â¤µï¸ NOTIFICATION â¤µï¸

Messaging Agent:
  1. Prompt Gemini: "Summarize this deal exciting - 2-3 sents"
  2. Gemini response: "Amazing 55\" 4K TV deal! Huge savings
                      of $69.50 vs estimated value. Features
                      Dolby Vision HDR, Roku OS, and premium
                      connectivity - perfect time to upgrade!"
  3. Send Pushover notification:
     Title: "Deal Alert!"
     Message: "Amazing 55\" 4K TV deal! Huge savings...
              https://www.dealnews.com/..."
     Sound: "cashregister"

â¤µï¸ PERSISTENCE â¤µï¸

Update memory.json:
  [
    {...existing opportunities...},
    {
      "deal": {
        "product_description": "55-inch 4K Smart TV...",
        "price": 178.00,
        "url": "https://www.dealnews.com/..."
      },
      "estimate": 247.50,
      "discount": 69.50
    }
  ]
```

---

## ğŸ“ Engine Performance Characteristics

### Computational Requirements

| Component | Time | Resources | Notes |
|-----------|------|-----------|-------|
| Deal Scraping | 1-2 sec | Network | 30 feeds Ã— 3 sources |
| Scanner Validation | 3-5 sec | OpenAI API | Structured output |
| Frontier Agent | 2-3 sec | GPU/CPU + API | RAG + LLM call |
| Specialist Agent | 1-2 sec | Modal GPU | Remote function |
| Neural Network | <1 sec | GPU/CPU | Pre-trained model |
| Ensemble | <1 sec | CPU | Weighted average |
| Messaging | 1-2 sec | Network | Gemini + Pushover |
| **Total per cycle** | **~12-18 sec** | **Varies** | **Parallel potential** |

### Model Accuracy Metrics

(Based on evaluator module testing)

- **Frontier Agent**: MAE â‰ˆ $30-50 (context-aware)
- **Specialist Agent**: MAE â‰ˆ $40-60 (domain-specific)
- **Neural Network**: MAE â‰ˆ $50-80 (feature-based)
- **Ensemble**: MAE â‰ˆ $25-40 (combined robustness)

---

## ğŸ”Œ API Endpoints

```
POST /run
  â”œâ”€ Trigger one complete cycle
  â”œâ”€ Returns: List[Opportunity]
  â””â”€ Response time: ~15 seconds

GET /health
  â”œâ”€ Health check
  â””â”€ Response: {"status": "ok"}
```

---

## ğŸ“ˆ Data Flow Summary

```
External Source
    â†“
RSS Feed Parser (30 items)
    â†“
HTML Cleaner (ScrapedDeal)
    â†“
Memory Filter (new only)
    â†“
Scanner Validation (top 5)
    â†“
Preprocessing (pass-through)
    â†“
3-Model Ensemble Pricing
    â”œâ”€ Frontier (80%) + RAG
    â”œâ”€ Specialist (10%)
    â””â”€ Neural Network (10%)
    â†“
Ensemble Average
    â†“
Discount Calculation
    â†“
Threshold Filter ($50)
    â†“
Best Opportunity
    â†“
User Notification (Pushover)
    â†“
Memory Persistence
    â†“
API Response
```

---

This detailed flowchart and engine component documentation provides complete visibility into how ValuAI processes product deals from discovery through pricing, evaluation, and alerting.
